<!DOCTYPE html>
<html lang="km">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vann Student Management System</title>
<link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0e1a;
    --surface: #111827;
    --surface2: #1a2235;
    --surface3: #1f2d44;
    --border: #243047;
    --accent: #3b82f6;
    --accent2: #6366f1;
    --accent3: #10b981;
    --accent4: #f59e0b;
    --danger: #ef4444;
    --text: #e2e8f0;
    --text2: #94a3b8;
    --text3: #64748b;
    --glow: rgba(59,130,246,0.15);
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { font-family:'Sora',sans-serif; background:var(--bg); color:var(--text); min-height:100vh; overflow-x:hidden; }

  /* SCROLLBAR */
  ::-webkit-scrollbar { width:6px; }
  ::-webkit-scrollbar-track { background:var(--surface); }
  ::-webkit-scrollbar-thumb { background:var(--border); border-radius:3px; }

  /* LOGIN */
  #loginScreen {
    position:fixed; inset:0; z-index:9999;
    background:var(--bg);
    display:flex; align-items:center; justify-content:center;
    background-image: radial-gradient(ellipse at 20% 50%, rgba(59,130,246,0.08) 0%, transparent 60%),
                      radial-gradient(ellipse at 80% 20%, rgba(99,102,241,0.06) 0%, transparent 50%);
  }
  .login-box {
    width:420px; padding:48px 40px;
    background:var(--surface);
    border:1px solid var(--border);
    border-radius:20px;
    box-shadow:0 0 60px rgba(59,130,246,0.1);
    animation: fadeUp 0.6s ease;
  }
  @keyframes fadeUp { from{opacity:0;transform:translateY(30px)} to{opacity:1;transform:none} }
  .login-logo { text-align:center; margin-bottom:32px; }
  .login-logo .logo-icon {
    width:64px; height:64px; margin:0 auto 12px;
    background:linear-gradient(135deg,var(--accent),var(--accent2));
    border-radius:16px; display:flex; align-items:center; justify-content:center;
    font-size:28px;
  }
  .login-logo h1 { font-size:22px; font-weight:700; }
  .login-logo p { color:var(--text2); font-size:13px; margin-top:4px; }
  .role-tabs { display:flex; gap:8px; margin-bottom:24px; }
  .role-tab {
    flex:1; padding:10px; border:1px solid var(--border); border-radius:10px;
    background:transparent; color:var(--text2); cursor:pointer; font-family:inherit;
    font-size:13px; transition:all 0.2s; text-align:center;
  }
  .role-tab.active { background:var(--accent); color:#fff; border-color:var(--accent); }
  .form-group { margin-bottom:16px; }
  .form-group label { display:block; font-size:12px; color:var(--text2); margin-bottom:6px; font-weight:500; letter-spacing:0.05em; text-transform:uppercase; }
  .form-group input, .form-group select {
    width:100%; padding:12px 14px; background:var(--surface2);
    border:1px solid var(--border); border-radius:10px; color:var(--text);
    font-family:inherit; font-size:14px; transition:border 0.2s; outline:none;
  }
  .form-group input:focus, .form-group select:focus { border-color:var(--accent); box-shadow:0 0 0 3px var(--glow); }
  .btn-primary {
    width:100%; padding:14px; background:linear-gradient(135deg,var(--accent),var(--accent2));
    border:none; border-radius:10px; color:#fff; font-family:inherit;
    font-size:15px; font-weight:600; cursor:pointer; transition:opacity 0.2s;
  }
  .btn-primary:hover { opacity:0.9; }
  .login-hint { margin-top:16px; text-align:center; font-size:12px; color:var(--text3); }

  /* MAIN LAYOUT */
  #app { display:flex; min-height:100vh; }
  
  /* FIXED SIDEBAR */
  #sidebar {
    width:260px; background:var(--surface); border-right:1px solid var(--border);
    display:flex; flex-direction:column; position:fixed; top:0; left:0; bottom:0; 
    z-index:1000;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* SIDEBAR OVERLAY (MOBILE ONLY) */
  #sidebarOverlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    backdrop-filter: blur(2px);
    z-index: 999;
  }

  .sidebar-header {
    padding:24px 20px; border-bottom:1px solid var(--border);
    display:flex; align-items:center; gap:12px;
  }
  .sidebar-logo {
    width:40px; height:40px; border-radius:12px; flex-shrink:0;
    background:linear-gradient(135deg,var(--accent),var(--accent2));
    display:flex; align-items:center; justify-content:center; font-size:20px;
  }
  .sidebar-title { font-size:14px; font-weight:700; line-height:1.3; }
  .sidebar-subtitle { font-size:11px; color:var(--text3); }
  .sidebar-user {
    padding:16px 20px; border-bottom:1px solid var(--border);
    display:flex; align-items:center; gap:10px;
  }
  .user-avatar {
    width:36px; height:36px; border-radius:50%;
    display:flex; align-items:center; justify-content:center;
    font-size:15px; font-weight:600; flex-shrink:0;
  }
  .user-info .user-name { font-size:13px; font-weight:600; }
  .user-info .user-role {
    font-size:11px; padding:2px 8px; border-radius:20px;
    display:inline-block; margin-top:2px; font-weight:500;
  }
  .role-admin { background:rgba(239,68,68,0.15); color:#f87171; }
  .role-teacher { background:rgba(59,130,246,0.15); color:#60a5fa; }
  .role-student { background:rgba(16,185,129,0.15); color:#34d399; }
  nav { padding:12px 12px; flex:1; overflow-y:auto; }
  .nav-section { margin-bottom:20px; }
  .nav-label { font-size:10px; font-weight:600; color:var(--text3); text-transform:uppercase; letter-spacing:0.1em; padding:0 8px; margin-bottom:6px; }
  .nav-item {
    display:flex; align-items:center; gap:10px; padding:10px 12px;
    border-radius:10px; cursor:pointer; font-size:13px; font-weight:500;
    color:var(--text2); transition:all 0.2s; margin-bottom:2px;
    position:relative; border:none; background:none; width:100%; text-align:left;
  }
  .nav-item:hover { background:var(--surface2); color:var(--text); }
  .nav-item.active { background:rgba(59,130,246,0.15); color:var(--accent); }
  .nav-item .nav-icon { font-size:16px; width:20px; text-align:center; }
  .nav-badge {
    margin-left:auto; font-size:10px; font-weight:600; padding:2px 7px;
    border-radius:20px; background:var(--accent); color:#fff;
  }
  .sidebar-footer { padding:12px 20px; border-top:1px solid var(--border); }
  .btn-logout {
    width:100%; padding:10px; border:1px solid var(--border); border-radius:10px;
    background:none; color:var(--text2); font-family:inherit; font-size:13px;
    cursor:pointer; transition:all 0.2s; display:flex; align-items:center; justify-content:center; gap:8px;
  }
  .btn-logout:hover { background:rgba(239,68,68,0.1); color:var(--danger); border-color:var(--danger); }

  /* MAIN CONTENT */
  #main { margin-left:260px; flex:1; display:flex; flex-direction:column; min-height:100vh; transition: margin-left 0.3s; }
  .topbar {
    padding:16px 32px; border-bottom:1px solid var(--border);
    display:flex; align-items:center; justify-content:space-between;
    background:var(--surface); position:sticky; top:0; z-index:50;
  }
  .topbar-left h2 { font-size:18px; font-weight:700; }
  .topbar-left p { font-size:12px; color:var(--text3); margin-top:2px; }
  .topbar-actions { display:flex; align-items:center; gap:12px; }
  .btn { padding:9px 18px; border-radius:9px; font-family:inherit; font-size:13px; font-weight:600; cursor:pointer; border:none; transition:all 0.2s; display:inline-flex; align-items:center; gap:8px; }
  .btn-sm { padding:7px 14px; font-size:12px; }
  .btn-blue { background:var(--accent); color:#fff; }
  .btn-blue:hover { opacity:0.85; }
  .btn-green { background:var(--accent3); color:#fff; }
  .btn-green:hover { opacity:0.85; }
  .btn-red { background:var(--danger); color:#fff; }
  .btn-red:hover { opacity:0.85; }
  .btn-ghost { background:var(--surface2); color:var(--text); border:1px solid var(--border); }
  .btn-ghost:hover { background:var(--surface3); }
  .content { padding:28px 32px; flex:1; }

  /* PAGES */
  .page { display:none; }
  .page.active { display:block; animation:fadeIn 0.3s ease; }
  @keyframes fadeIn { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:none} }

  /* STATS GRID */
  .stats-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:16px; margin-bottom:24px; }
  .stat-card {
    padding:20px; border-radius:14px; border:1px solid var(--border);
    background:var(--surface); position:relative; overflow:hidden;
  }
  .stat-card::before {
    content:''; position:absolute; top:-30px; right:-30px;
    width:80px; height:80px; border-radius:50%; opacity:0.15;
  }
  .stat-card.blue::before { background:var(--accent); }
  .stat-card.purple::before { background:var(--accent2); }
  .stat-card.green::before { background:var(--accent3); }
  .stat-card.amber::before { background:var(--accent4); }
  .stat-icon { font-size:22px; margin-bottom:12px; }
  .stat-value { font-size:28px; font-weight:800; font-family:'JetBrains Mono',monospace; }
  .stat-label { font-size:12px; color:var(--text2); margin-top:4px; font-weight:500; }
  .stat-change { font-size:11px; margin-top:6px; }
  .stat-change.up { color:var(--accent3); }
  .stat-change.down { color:var(--danger); }

  /* CARDS */
  .card { background:var(--surface); border:1px solid var(--border); border-radius:14px; }
  .card-header { padding:18px 20px; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; }
  .card-title { font-size:14px; font-weight:700; }
  .card-body { padding:20px; }

  /* TABLE */
  .table-wrap { overflow-x:auto; }
  table { width:100%; border-collapse:collapse; }
  th { padding:10px 14px; font-size:11px; font-weight:600; color:var(--text3); text-transform:uppercase; letter-spacing:0.06em; text-align:left; border-bottom:1px solid var(--border); }
  td { padding:12px 14px; font-size:13px; border-bottom:1px solid var(--border); color:var(--text2); }
  tr:last-child td { border-bottom:none; }
  tr:hover td { background:var(--surface2); }
  .badge { display:inline-flex; align-items:center; padding:3px 10px; border-radius:20px; font-size:11px; font-weight:600; }
  .badge-blue { background:rgba(59,130,246,0.15); color:#60a5fa; }
  .badge-green { background:rgba(16,185,129,0.15); color:#34d399; }
  .badge-red { background:rgba(239,68,68,0.15); color:#f87171; }
  .badge-amber { background:rgba(245,158,11,0.15); color:#fbbf24; }
  .badge-purple { background:rgba(99,102,241,0.15); color:#a5b4fc; }

  /* MODAL */
  .modal-overlay {
    position:fixed; inset:0; background:rgba(0,0,0,0.7); z-index:2000;
    display:none; align-items:center; justify-content:center; backdrop-filter:blur(4px);
  }
  .modal-overlay.open { display:flex; }
  .modal {
    background:var(--surface); border:1px solid var(--border); border-radius:20px;
    width:520px; max-width:95vw; max-height:90vh; overflow:hidden;
    display:flex; flex-direction:column;
    animation:modalIn 0.3s ease;
  }
  @keyframes modalIn { from{opacity:0;transform:scale(0.9)} to{opacity:1;transform:none} }
  .modal-header { padding:20px 24px; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; }
  .modal-header h3 { font-size:16px; font-weight:700; }
  .modal-close { background:none; border:none; color:var(--text3); cursor:pointer; font-size:20px; padding:4px 8px; border-radius:6px; }
  .modal-close:hover { background:var(--surface2); color:var(--text); }
  .modal-body { padding:24px; overflow-y:auto; }
  .modal-footer { padding:16px 24px; border-top:1px solid var(--border); display:flex; justify-content:flex-end; gap:10px; }

  /* CHARTS */
  .chart-bar-wrap { height:140px; display:flex; align-items:flex-end; gap:10px; padding:0 4px; }
  .chart-bar-group { flex:1; display:flex; flex-direction:column; align-items:center; gap:6px; }
  .chart-bar { width:100%; border-radius:6px 6px 0 0; position:relative; cursor:pointer; transition:opacity 0.2s; min-height:4px; }
  .chart-bar:hover { opacity:0.8; }
  .donut-wrap { display:flex; align-items:center; justify-content:center; gap:24px; }

  /* RESPONSIVE */
  .menu-toggle { display:none; background:none; border:none; color:var(--text); font-size:22px; cursor:pointer; }
  
  @media(max-width:900px) {
    #sidebar { transform:translateX(-100%); }
    #sidebar.open { transform:translateX(0); box-shadow: 10px 0 30px rgba(0,0,0,0.5); }
    #sidebar.open + #sidebarOverlay { display: block; }
    #main { margin-left:0; }
    .menu-toggle { display:block; }
    .stats-grid { grid-template-columns:1fr 1fr; }
    .charts-grid { grid-template-columns:1fr; }
  }

  /* TOAST */
  #toast {
    position:fixed; bottom:24px; right:24px; z-index:9000;
    background:var(--surface); border:1px solid var(--border); border-radius:12px;
    padding:14px 20px; font-size:13px; font-weight:500;
    box-shadow:0 8px 32px rgba(0,0,0,0.4); display:none; align-items:center; gap:10px;
    animation:slideUp 0.3s ease;
  }
  @keyframes slideUp { from{transform:translateY(20px);opacity:0} to{transform:none;opacity:1} }
  #toast.show { display:flex; }
</style>
</head>
<body>

<div id="loginScreen">
  <div class="login-box">
    <div class="login-logo">
      <div class="logo-icon">üéì</div>
      <h1>VANN System</h1>
      <p>Student Management Platform</p>
    </div>
    <div class="role-tabs">
      <button class="role-tab active" onclick="selectRole('Admin')">üëë Admin</button>
      <button class="role-tab" onclick="selectRole('Teacher')">üë®‚Äçüè´ Teacher</button>
      <button class="role-tab" onclick="selectRole('Student')">üéí Student</button>
    </div>
    <div class="form-group">
      <label>Username</label>
      <input id="loginUser" type="text" placeholder="Enter username..." value="admin">
    </div>
    <div class="form-group">
      <label>Password</label>
      <input id="loginPass" type="password" placeholder="Enter password..." value="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
    </div>
    <button class="btn-primary" onclick="doLogin()">üîê Sign In</button>
    <p class="login-hint">Demo: Any credentials work for all roles</p>
  </div>
</div>

<div id="app" style="display:none">

  <aside id="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-logo">üéì</div>
      <div>
        <div class="sidebar-title">VANNEdu</div>
        <div class="sidebar-subtitle">Management System</div>
      </div>
    </div>
    <div class="sidebar-user">
      <div class="user-avatar" id="sidebarAvatar" style="background:linear-gradient(135deg,#3b82f6,#6366f1)">A</div>
      <div class="user-info">
        <div class="user-name" id="sidebarName">Administrator</div>
        <span class="user-role role-admin" id="sidebarRole">Admin</span>
      </div>
    </div>
    <nav id="navMenu">
      </nav>
    <div class="sidebar-footer">
      <button class="btn-logout" onclick="doLogout()">üö™ Sign Out</button>
    </div>
  </aside>

  <div id="sidebarOverlay" onclick="toggleSidebar()"></div>

  <main id="main">
    <div class="topbar">
      <div style="display:flex;align-items:center;gap:12px">
        <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
        <div class="topbar-left">
          <h2 id="pageTitle">Dashboard</h2>
          <p id="pageSubtitle">Welcome back! Here's what's happening.</p>
        </div>
      </div>
      <div class="topbar-actions" id="topbarActions"></div>
    </div>
    <div class="content" id="pageContent">
      </div>
  </main>
</div>

<div class="modal-overlay" id="modalOverlay" onclick="if(event.target===this)closeModal()">
  <div class="modal" id="modal">
    <div class="modal-header">
      <h3 id="modalTitle">Modal</h3>
      <button class="modal-close" onclick="closeModal()">‚úï</button>
    </div>
    <div class="modal-body" id="modalBody"></div>
    <div class="modal-footer" id="modalFooter"></div>
  </div>
</div>

<div id="toast"><span id="toastIcon">‚úÖ</span><span id="toastMsg">Done!</span></div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  DATA STORE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let currentRole = 'Admin';
let currentUser = { name:'Administrator', avatar:'A', color:'linear-gradient(135deg,#3b82f6,#6366f1)' };
let currentPage = 'dashboard';

const db = {
  students: [
    {id:'S001', name:'Sokha Chea', gender:'Male', dob:'2008-03-12', class:'Grade 10A', phone:'012-345-678', email:'sokha@edu.kh', gpa:3.8, status:'Active', address:'Phnom Penh'},
    {id:'S002', name:'Bopha Lim', gender:'Female', dob:'2008-07-22', class:'Grade 10A', phone:'011-223-334', email:'bopha@edu.kh', gpa:3.5, status:'Active', address:'Siem Reap'}
  ],
  teachers: [
    {id:'T001', name:'Sophea Rin', gender:'Female', subject:'Mathematics', phone:'012-100-200', email:'sophea@edu.kh', status:'Active', hire:'2018-08-01'}
  ],
  classes: [
    {id:'C002', name:'Grade 10A', teacher:'Sophea Rin', students:35, room:'Room 201', year:'2025-2026'}
  ],
  subjects: [
    {id:'SUB001', name:'Mathematics', code:'MATH', teacher:'Sophea Rin', credits:4, classes:'10A', type:'Core'}
  ],
  scores: [
    {id:'SC001', student:'Sokha Chea', class:'Grade 10A', subject:'Mathematics', midterm:78, final:85, assignments:90, total:84, grade:'B+'}
  ],
  attendance: { 'S001': [1,1,1,0,1,1,1,1,2,1] },
  payments: [ {id:'P001', student:'Sokha Chea', month:'January 2026', amount:45, paid:true, date:'2026-01-05'} ],
  notifications: [ {id:1, type:'info', icon:'üìã', title:'New Enrollment', text:'3 new students registered', time:'5 min ago', read:false} ]
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  AUTH
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const roleConfigs = {
  Admin: {
    color:'linear-gradient(135deg,#ef4444,#f97316)', badgeClass:'role-admin',
    nav:[
      {section:'Overview', items:[{id:'dashboard',icon:'üìä',label:'Dashboard'},{id:'notifications',icon:'üîî',label:'Notifications',badge:2}]},
      {section:'Management', items:[{id:'students',icon:'üéí',label:'Students'},{id:'teachers',icon:'üë®‚Äçüè´',label:'Teachers'},{id:'classes',icon:'üè´',label:'Classes'}]},
      {section:'Account', items:[{id:'profile',icon:'üë§',label:'My Profile'}]}
    ]
  },
  Teacher: {
    color:'linear-gradient(135deg,#3b82f6,#6366f1)', badgeClass:'role-teacher',
    nav:[
      {section:'Overview', items:[{id:'dashboard',icon:'üìä',label:'Dashboard'}]},
      {section:'My Classes', items:[{id:'students',icon:'üéí',label:'Students'},{id:'attendance',icon:'‚úÖ',label:'Attendance'}]},
      {section:'Account', items:[{id:'profile',icon:'üë§',label:'My Profile'}]}
    ]
  },
  Student: {
    color:'linear-gradient(135deg,#10b981,#06b6d4)', badgeClass:'role-student',
    nav:[
      {section:'Overview', items:[{id:'dashboard',icon:'üìä',label:'Dashboard'}]},
      {section:'Academic', items:[{id:'scores',icon:'üìù',label:'My Grades'},{id:'attendance',icon:'‚úÖ',label:'My Attendance'}]},
      {section:'Account', items:[{id:'profile',icon:'üë§',label:'My Profile'}]}
    ]
  }
};

function selectRole(role) {
  currentRole = role;
  document.querySelectorAll('.role-tab').forEach((t,i)=>{
    t.classList.toggle('active', ['Admin','Teacher','Student'][i]===role);
  });
}

function doLogin() {
  const cfg = roleConfigs[currentRole];
  currentUser = {name: currentRole === 'Admin' ? 'Administrator' : currentRole === 'Teacher' ? 'Sophea Rin' : 'Sokha Chea', avatar: currentRole[0], color: cfg.color};
  document.getElementById('loginScreen').style.display='none';
  document.getElementById('app').style.display='flex';
  buildSidebar();
  navigateTo('dashboard');
  showToast('‚úÖ', `Welcome back, ${currentUser.name}!`);
}

function doLogout() {
  location.reload();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  SIDEBAR & NAVIGATION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('open');
}

function buildSidebar() {
  const cfg = roleConfigs[currentRole];
  document.getElementById('sidebarAvatar').textContent = currentUser.avatar;
  document.getElementById('sidebarAvatar').style.background = currentUser.color;
  document.getElementById('sidebarName').textContent = currentUser.name;
  const roleEl = document.getElementById('sidebarRole');
  roleEl.textContent = currentRole;
  roleEl.className = `user-role ${cfg.badgeClass}`;

  const nav = document.getElementById('navMenu');
  nav.innerHTML = cfg.nav.map(section=>`
    <div class="nav-section">
      <div class="nav-label">${section.section}</div>
      ${section.items.map(item=>`
        <button class="nav-item" id="nav-${item.id}" onclick="navigateTo('${item.id}')">
          <span class="nav-icon">${item.icon}</span>
          <span>${item.label}</span>
          ${item.badge?`<span class="nav-badge">${item.badge}</span>`:''}
        </button>
      `).join('')}
    </div>
  `).join('');
}

function navigateTo(page) {
  currentPage = page;
  document.querySelectorAll('.nav-item').forEach(el=>el.classList.remove('active'));
  const navEl = document.getElementById(`nav-${page}`);
  if(navEl) navEl.classList.add('active');
  
  // Close sidebar on mobile after clicking
  if (window.innerWidth <= 900) {
    document.getElementById('sidebar').classList.remove('open');
  }
  
  renderPage(page);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  PAGE RENDERER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderPage(page) {
  const titles = { dashboard: 'Dashboard', students: 'Students', teachers: 'Teachers', profile: 'My Profile' };
  document.getElementById('pageTitle').textContent = titles[page] || page;
  const content = document.getElementById('pageContent');
  
  if(page === 'dashboard') {
      content.innerHTML = `
        <div class="stats-grid">
            <div class="stat-card blue"><div class="stat-icon">üéí</div><div class="stat-value">${db.students.length}</div><div class="stat-label">Total Students</div></div>
            <div class="stat-card purple"><div class="stat-icon">üë®‚Äçüè´</div><div class="stat-value">${db.teachers.length}</div><div class="stat-label">Teachers</div></div>
            <div class="stat-card green"><div class="stat-icon">‚≠ê</div><div class="stat-value">3.65</div><div class="stat-label">Avg GPA</div></div>
            <div class="stat-card amber"><div class="stat-icon">üí∞</div><div class="stat-value">1</div><div class="stat-label">Unpaid Fees</div></div>
        </div>
      `;
  } else {
      content.innerHTML = `<div style="text-align:center;padding:60px;color:var(--text3)">${page} page content is being loaded...</div>`;
  }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  HELPERS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openModal() { document.getElementById('modalOverlay').classList.add('open'); }
function closeModal() { document.getElementById('modalOverlay').classList.remove('open'); }

function showToast(icon, msg) {
  const t=document.getElementById('toast');
  document.getElementById('toastIcon').textContent=icon;
  document.getElementById('toastMsg').textContent=msg;
  t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),3000);
}
</script>
</body>
</html>
